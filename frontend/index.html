<!DOCTYPE html>
<html lang="en" data-page="index">
<head>
  <meta charset="UTF-8" />
  <title>Smart Supply Chain</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body data-page="index">
  <h1>Smart Supply Chain</h1>

  <!-- ðŸ”½ Inject the shared modular navbar -->
  <div id="navbar-container"></div>

  <div class="content">
    <h2>Welcome to Smart Supply Chain Platform</h2>
    <p>Select a tab from the menu to begin.</p>
  </div>

  <!-- ðŸ”½ Inventory Management Section -->
  <div id="inventory-section" style="display: none;">
    <div class="inventory-header">
      <h2>Inventory Management</h2>
      <button id="toggle-add-form-btn" type="button">Add Item</button>
    </div>

    <form id="add-item-form" style="display: none;">
      <div class="form-container">
        <input type="text" id="item-ID" placeholder="Item ID" required />
        <input type="text" id="item-name" placeholder="Item Name" required />
        <input type="text" id="item-desc" placeholder="Description" required />
        <input type="text" id="serial-no" placeholder="Serial No" required />
        <input type="text" id="item-category" placeholder="Category" required />
        <input type="number" id="item-qty" placeholder="Quantity" required />
        <input type="text" id="item-price" placeholder="Price" required />
        <input type="text" id="item-supplier" placeholder="Supplier" required />
        <input type="text" id="item-location" placeholder="Location" required />
        <div class="form-actions">
          <button type="submit" id="add-item-submit-btn">Add Item</button>
        </div>
      </div>
    </form>

    <table id="inventory-table">
      <thead>
        <tr>
          <th>Item ID</th>
          <th>Item Name</th>
          <th>Description</th>
          <th>Serial No</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Supplier</th>
          <th>Location</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- Inventory items appear here -->
      </tbody>
    </table>
  </div>

  <!-- ðŸ”½ JS scripts -->
  <script type="module" src="loadNavbar.js"></script>
  <script>
    // Navbar tab switching for inline inventory
    document.addEventListener("DOMContentLoaded", () => {
      const navLinks = document.querySelectorAll(".navbar a");
      const content = document.querySelector(".content");
      const inventorySection = document.getElementById("inventory-section");

      navLinks.forEach((tab, idx) => {
        tab.addEventListener("click", (e) => {
          e.preventDefault();
          navLinks.forEach((a) => a.classList.remove("active"));
          tab.classList.add("active");

          const isInventory = tab.getAttribute("href").includes("inventory");
          inventorySection.style.display = isInventory ? "block" : "none";
          content.style.display = isInventory ? "none" : "block";
        });
      });
    });

    // Toggle Add Item form
    document.getElementById("toggle-add-form-btn").onclick = function () {
      const form = document.getElementById("add-item-form");
      form.style.display = form.style.display === "block" ? "none" : "block";
    };

    // Add Item form submission
    document.getElementById("add-item-form").onsubmit = function (e) {
      e.preventDefault();
      const id = document.getElementById("item-ID").value;
      const name = document.getElementById("item-name").value;
      const desc = document.getElementById("item-desc").value;
      const serial = document.getElementById("serial-no").value;
      const category = document.getElementById("item-category").value;
      const qty = document.getElementById("item-qty").value;
      const price = document.getElementById("item-price").value;
      const supplier = document.getElementById("item-supplier").value;
      const location = document.getElementById("item-location").value;

      const tableBody = document.querySelector("#inventory-table tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${id}</td>
        <td>${name}</td>
        <td>${desc}</td>
        <td>${serial}</td>
        <td>${category}</td>
        <td>${qty}</td>
        <td>${price}</td>
        <td>${supplier}</td>
        <td>${location}</td>
        <td><button type="button" class="delete-btn">Delete</button></td>
      `;
      tableBody.appendChild(row);
      this.reset();
      document.getElementById("add-item-form").style.display = "none";
    };

    // Delete row logic
    document.querySelector("#inventory-table tbody").onclick = function (e) {
      if (e.target.classList.contains("delete-btn")) {
        e.target.closest("tr").remove();
      }
    };
  </script>
</body>
</html>
